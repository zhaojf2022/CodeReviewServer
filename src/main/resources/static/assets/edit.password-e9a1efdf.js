
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{d as m,r as _,x as P,F as S,o as h,c as v,P as U,G as B,e as t,n as R,k as T,m as M,u as N,a,f as e,g as s,i as $,N as z,Q as F,O as L,q as g}from"./index-04c83304.js";const A=m({name:"FixedActionBar"}),G=m({...A,setup(b){const c=_(!1);P(()=>{d(),window.addEventListener("scroll",d)}),S(()=>{window.removeEventListener("scroll",d)});function d(){const l=document.documentElement.scrollTop||document.body.scrollTop,r=document.documentElement.clientHeight||document.body.clientHeight,o=document.documentElement.scrollHeight||document.body.scrollHeight;c.value=Math.ceil(l+r)>=o}return(l,r)=>(h(),v("div",{class:B(["actionbar",{shadow:!t(c)}]),"data-fixed-calc-width":""},[U(l.$slots,"default",{},void 0,!0)],2))}});const I=R(G,[["__scopeId","data-v-4af3e54d"]]),O=m({name:"PersonalEditPassword"}),Q=m({...O,setup(b){const c=T(),d=M(),l=N(),r=_(),o=_({password:"",newpassword:"",checkpassword:""}),y=_({password:[{required:!0,message:"请输入原密码",trigger:"blur"}],newpassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}],checkpassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{validator:(i,n,p)=>{n!==o.value.newpassword?p(new Error("请确认新密码")):p()}}]});function x(){r.value&&r.value.validate(i=>{i&&l.editPassword(o.value).then(()=>{z({type:"success",message:"密码修改成功，请重新登录"}),l.logout().then(()=>{d.push({name:"login",query:{redirect:c.fullPath}})})})})}return(i,n)=>{const p=F,w=a("el-input"),f=a("el-form-item"),V=a("el-form"),k=a("el-col"),E=a("el-row"),H=L,q=a("el-button"),C=I;return h(),v("div",null,[e(p,{title:"修改密码",content:"定期修改密码可以提高帐号安全性噢~"}),e(H,null,{default:s(()=>[e(E,null,{default:s(()=>[e(k,{md:24,lg:12},{default:s(()=>[e(V,{ref_key:"formRef",ref:r,model:t(o),rules:t(y),"label-width":"120px"},{default:s(()=>[e(f,{label:"原密码",prop:"password"},{default:s(()=>[e(w,{modelValue:t(o).password,"onUpdate:modelValue":n[0]||(n[0]=u=>t(o).password=u),type:"password",placeholder:"请输入原密码","show-password":""},null,8,["modelValue"])]),_:1}),e(f,{label:"新密码",prop:"newpassword"},{default:s(()=>[e(w,{modelValue:t(o).newpassword,"onUpdate:modelValue":n[1]||(n[1]=u=>t(o).newpassword=u),type:"password",placeholder:"请输入原密码","show-password":""},null,8,["modelValue"])]),_:1}),e(f,{label:"确认新密码",prop:"checkpassword"},{default:s(()=>[e(w,{modelValue:t(o).checkpassword,"onUpdate:modelValue":n[2]||(n[2]=u=>t(o).checkpassword=u),type:"password",placeholder:"请输入原密码","show-password":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1})]),_:1}),e(C,null,{default:s(()=>[e(q,{type:"primary",size:"large",onClick:x},{default:s(()=>[$(" 提交 ")]),_:1})]),_:1})])}}});typeof g=="function"&&g(Q);export{Q as default};
//# sourceMappingURL=edit.password-e9a1efdf.js.map
