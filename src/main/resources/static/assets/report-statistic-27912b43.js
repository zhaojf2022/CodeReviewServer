
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{R as f,W as N,u as q,r as F,n as L,a as o,o as s,c,f as e,g as t,M as _,U as p,I as h,i as U,b as D,q as R,Q as O,_ as z,O as V}from"./index-04c83304.js";import{_ as Q}from"./index-4ca463c3.js";const W=q();F();F();F();F();const k={data(){return{search:{},statData:{},departmentTree:{},listProjects:[],listUsers:[],confirmResultItems:[]}},computed:{},mounted(){this.loadUserList(),this.loadProjects(),this.loadConfirmResultItems(),this.loadDepartmentTree(),this.clickSearch()},methods:{clickSearch(){f.post("/server/stat/query",this.search).then(a=>{this.statData=a.data,this.initChart(this.$refs.confirmResultRef,this.statData.confirmResultChartModel),this.initChart(this.$refs.projectRef,this.statData.projectChartModel),this.initChart(this.$refs.reviewerRef,this.statData.reviewerChartModel),this.initChart(this.$refs.realConfirmerRef,this.statData.realConfirmerChartModel)})},resetSearch(){this.search={projectId:null,departmentId:null,commitUser:W.account,realConfirmUser:null,assignConfirmUser:null,confirmResult:null},this.clickSearch()},loadUserList(){f.get("server/user/getAllUserDetails").then(a=>{this.listUsers=a.data})},loadProjects(){f.get(`server/project/queryProjectInDept?deptId=${this.search.departmentId}`).then(a=>{this.listProjects=a.data})},loadConfirmResultItems(){f.get("server/column/queryConfirmResultDictItems").then(a=>{this.confirmResultItems=a.data})},loadDepartmentTree(){f.get("server/dept/getDeptTree").then(a=>{this.departmentTree=a.data})},initChart(a,r){let b=N(a);const x={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:[]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:r.xaxisData}],yAxis:[{type:"value"}],series:[{type:"bar",data:r.seriesData}]};b.setOption(x)}}},G={ref:"confirmResultRef",style:{width:"100%",height:"320px"}},H={ref:"projectRef",style:{width:"100%",height:"320px"}},J={ref:"reviewerRef",style:{width:"100%",height:"320px"}},K={ref:"realConfirmerRef",style:{width:"100%",height:"320px"}};function X(a,r,b,x,u,g){const I=O,d=o("el-option"),m=o("el-select"),n=o("el-form-item"),i=o("el-col"),v=o("el-row"),j=o("el-tree-select"),w=z,M=o("el-icon"),y=o("el-button"),P=o("el-form"),S=Q,A=V,E=V,C=o("ElCol"),T=o("ElRow");return s(),c("div",null,[e(I,{title:"数据统计",content:"本页面提供数据统计分析能力，支持对符合指定条件的数据进行统计"}),e(A,{title:"过滤条件"},{default:t(()=>[e(S,null,{default:t(()=>[e(P,{model:u.search,size:"default","label-width":"120px"},{default:t(()=>[e(v,null,{default:t(()=>[e(i,{span:6},{default:t(()=>[e(n,{label:"检视人员"},{default:t(()=>[e(m,{modelValue:u.search.commitUser,"onUpdate:modelValue":r[0]||(r[0]=l=>u.search.commitUser=l),modelModifiers:{trim:!0},placeholder:"请输入姓名或账号查询",clearable:"",filterable:""},{default:t(()=>[(s(!0),c(_,null,p(u.listUsers,(l,B)=>(s(),h(d,{key:l.account,label:l.name,value:l.account},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(i,{span:6},{default:t(()=>[e(n,{label:"指派确认人员"},{default:t(()=>[e(m,{modelValue:u.search.assignConfirmUser,"onUpdate:modelValue":r[1]||(r[1]=l=>u.search.assignConfirmUser=l),modelModifiers:{trim:!0},placeholder:"请输入姓名或账号查询",clearable:"",filterable:""},{default:t(()=>[(s(!0),c(_,null,p(u.listUsers,(l,B)=>(s(),h(d,{key:l.account,label:l.name,value:l.account},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(i,{span:6},{default:t(()=>[e(n,{label:"实际确认人员"},{default:t(()=>[e(m,{modelValue:u.search.realConfirmUser,"onUpdate:modelValue":r[2]||(r[2]=l=>u.search.realConfirmUser=l),modelModifiers:{trim:!0},placeholder:"请输入姓名或账号查询",clearable:"",filterable:""},{default:t(()=>[(s(!0),c(_,null,p(u.listUsers,(l,B)=>(s(),h(d,{key:l.account,label:l.name,value:l.account},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(i,{span:6},{default:t(()=>[e(n,{label:"确认结果"},{default:t(()=>[e(m,{modelValue:u.search.confirmResult,"onUpdate:modelValue":r[3]||(r[3]=l=>u.search.confirmResult=l),modelModifiers:{trim:!0},placeholder:"输入评审意见的确认状态",clearable:""},{default:t(()=>[(s(!0),c(_,null,p(u.confirmResultItems,(l,B)=>(s(),h(d,{key:l.value,label:l.showName,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(i,{span:6},{default:t(()=>[e(n,{label:"归属部门"},{default:t(()=>[e(j,{clearable:"",modelValue:u.search.departmentId,"onUpdate:modelValue":r[4]||(r[4]=l=>u.search.departmentId=l),data:u.departmentTree,"render-after-expand":!1,"check-strictly":"true",onChange:g.loadProjects},null,8,["modelValue","data","onChange"])]),_:1})]),_:1}),e(i,{span:6},{default:t(()=>[e(n,{label:"归属项目"},{default:t(()=>[e(m,{modelValue:u.search.projectId,"onUpdate:modelValue":r[5]||(r[5]=l=>u.search.projectId=l),modelModifiers:{trim:!0},placeholder:"请选择",clearable:"",filterable:""},{default:t(()=>[(s(!0),c(_,null,p(u.listProjects,(l,B)=>(s(),h(d,{key:l.id,label:l.projectName,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(n,null,{default:t(()=>[e(y,{type:"primary",onClick:g.clickSearch},{icon:t(()=>[e(M,null,{default:t(()=>[e(w,{name:"ep:search"})]),_:1})]),default:t(()=>[U(" 查询 ")]),_:1},8,["onClick"]),e(y,{onClick:g.resetSearch},{default:t(()=>[U(" 重置 ")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1}),e(A,null,{default:t(()=>[e(T,{gutter:20,style:{margin:"-10px 10px"}},{default:t(()=>[e(C,{md:6},{default:t(()=>[e(E,{title:"评审意见确认结果统计",style:{margin:"10px 0"}},{default:t(()=>[D("div",G,null,512)]),_:1})]),_:1}),e(C,{md:6},{default:t(()=>[e(E,{title:"项目维度分布统计",style:{margin:"10px 0"}},{default:t(()=>[D("div",H,null,512)]),_:1})]),_:1}),e(C,{md:6},{default:t(()=>[e(E,{title:"检视人员提交记录统计",style:{margin:"10px 0"}},{default:t(()=>[D("div",J,null,512)]),_:1})]),_:1}),e(C,{md:6},{default:t(()=>[e(E,{title:"实际确认人员提交记录统计",style:{margin:"10px 0"}},{default:t(()=>[D("div",K,null,512)]),_:1})]),_:1})]),_:1})]),_:1})])}typeof R=="function"&&R(k);const $=L(k,[["render",X]]);export{$ as default};
//# sourceMappingURL=report-statistic-27912b43.js.map
