
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{_ as G}from"./index-e1039661.js";import{d as P,u as H,r as n,a as _,o as J,c as O,b as s,e as l,w as y,v as R,f as e,g as o,t as Q,h as W,i as f,j as X,k as Y,_ as Z,p as ee,l as oe,m as le,n as te,q}from"./index-04c83304.js";const b=g=>(ee("data-v-ae91adce"),g=g(),oe(),g),ae=b(()=>s("div",{class:"bg-banner"},null,-1)),se={id:"login-box"},re={class:"login-banner"},ne=b(()=>s("div",{class:"logo"},null,-1)),ue=["src"],de={class:"title-container"},ce={class:"title"},ie={class:"flex-bar"},pe=b(()=>s("div",{class:"title-container"},[s("h3",{class:"title"}," 探索从这里开始! 🚀 ")],-1)),me=b(()=>s("div",{class:"title-container"},[s("h3",{class:"title"}," 忘记密码了? 🔒 ")],-1)),_e={class:"sub-link"},fe=P({name:"Login"}),F=P({...fe,setup(g){var U;const C=Y(),I=le(),L=H(),B=new URL(""+new URL("login-banner-dd9ea531.png",import.meta.url).href,self.location).href,N="CodeReview系统",w=n("login"),h=n(!1),D=n(((U=C.query.redirect)==null?void 0:U.toString())??"/"),v=n(),u=n({account:localStorage.login_account||"",password:"",remember:!!localStorage.login_account}),E=n({account:[{required:!0,trigger:"blur",message:"请输入用户名"}],password:[{required:!0,trigger:"blur",message:"请输入密码"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}]});function S(){v.value&&v.value.validate(V=>{V&&(h.value=!0,L.login(u.value).then(()=>{h.value=!1,u.value.remember?localStorage.setItem("login_account",u.value.account):localStorage.removeItem("login_account"),I.push(D.value)}).catch(()=>{h.value=!1}))})}const K=n(),d=n({account:"",captcha:"",password:"",checkPassword:""}),T=n({account:[{required:!0,trigger:"blur",message:"请输入用户名"}],captcha:[{required:!0,trigger:"blur",message:"请输入验证码"}],password:[{required:!0,trigger:"blur",message:"请输入密码"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}],checkPassword:[{required:!0,trigger:"blur",message:"请再次输入密码"},{validator:(V,t,r)=>{t!==d.value.password?r(new Error("两次输入的密码不一致")):r()}}]}),$=n(),m=n({account:localStorage.login_account||"",captcha:"",newPassword:""}),j=n({account:[{required:!0,trigger:"blur",message:"请输入用户名"}],captcha:[{required:!0,trigger:"blur",message:"请输入验证码"}],newPassword:[{required:!0,trigger:"blur",message:"请输入新密码"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}]});return(V,t)=>{const r=Z,c=_("el-icon"),i=_("el-input"),p=_("el-form-item"),z=_("el-checkbox"),x=_("el-button"),k=_("el-form"),M=_("el-link"),A=G;return J(),O("div",null,[ae,s("div",se,[s("div",re,[ne,s("img",{src:l(B),class:"banner"},null,8,ue)]),y(e(k,{ref_key:"loginFormRef",ref:v,model:l(u),rules:l(E),class:"login-form",autocomplete:"on"},{default:o(()=>[s("div",de,[s("h3",ce," 欢迎来到 "+Q(l(N))+" ! 👋🏻 ",1)]),s("div",null,[e(p,{prop:"account"},{default:o(()=>[e(i,{modelValue:l(u).account,"onUpdate:modelValue":t[0]||(t[0]=a=>l(u).account=a),placeholder:"用户名",text:"",tabindex:"1",autocomplete:"on"},{prefix:o(()=>[e(c,null,{default:o(()=>[e(r,{name:"ep:user"})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(p,{prop:"password"},{default:o(()=>[e(i,{modelValue:l(u).password,"onUpdate:modelValue":t[1]||(t[1]=a=>l(u).password=a),type:"password",placeholder:"密码",tabindex:"2",autocomplete:"on","show-password":"",onKeyup:W(S,["enter"])},{prefix:o(()=>[e(c,null,{default:o(()=>[e(r,{name:"ep:lock"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),s("div",ie,[e(z,{modelValue:l(u).remember,"onUpdate:modelValue":t[2]||(t[2]=a=>l(u).remember=a)},{default:o(()=>[f(" 记住我 ")]),_:1},8,["modelValue"])]),e(x,{loading:l(h),type:"primary",size:"large",style:{width:"100%"},onClick:X(S,["prevent"])},{default:o(()=>[f(" 登录 ")]),_:1},8,["loading"])]),_:1},8,["model","rules"]),[[R,l(w)==="login"]]),y(e(k,{ref_key:"registerFormRef",ref:K,model:l(d),rules:l(T),class:"login-form","auto-complete":"on"},{default:o(()=>[pe,s("div",null,[e(p,{prop:"account"},{default:o(()=>[e(i,{modelValue:l(d).account,"onUpdate:modelValue":t[3]||(t[3]=a=>l(d).account=a),placeholder:"用户名",tabindex:"1",autocomplete:"on"},{prefix:o(()=>[e(c,null,{default:o(()=>[e(r,{name:"ep:user"})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(p,{prop:"captcha"},{default:o(()=>[e(i,{ref:"captcha",modelValue:l(d).captcha,"onUpdate:modelValue":t[4]||(t[4]=a=>l(d).captcha=a),placeholder:"验证码",tabindex:"2",autocomplete:"on"},{prefix:o(()=>[e(c,null,{default:o(()=>[e(r,{name:"ep:key"})]),_:1})]),append:o(()=>[e(x,null,{default:o(()=>[f("发送验证码")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(p,{prop:"password"},{default:o(()=>[e(i,{modelValue:l(d).password,"onUpdate:modelValue":t[5]||(t[5]=a=>l(d).password=a),type:"password",placeholder:"密码",tabindex:"3",autocomplete:"on","show-password":""},{prefix:o(()=>[e(c,null,{default:o(()=>[e(r,{name:"ep:lock"})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(p,{prop:"checkPassword"},{default:o(()=>[e(i,{modelValue:l(d).checkPassword,"onUpdate:modelValue":t[6]||(t[6]=a=>l(d).checkPassword=a),type:"password",placeholder:"确认密码",tabindex:"4",autocomplete:"on","show-password":""},{prefix:o(()=>[e(c,null,{default:o(()=>[e(r,{name:"ep:lock"})]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1},8,["model","rules"]),[[R,l(w)==="register"]]),y(e(k,{ref_key:"resetFormRef",ref:$,model:l(m),rules:l(j),class:"login-form","auto-complete":"on"},{default:o(()=>[me,s("div",null,[e(p,{prop:"account"},{default:o(()=>[e(i,{modelValue:l(m).account,"onUpdate:modelValue":t[7]||(t[7]=a=>l(m).account=a),placeholder:"用户名",tabindex:"1",autocomplete:"on"},{prefix:o(()=>[e(c,null,{default:o(()=>[e(r,{name:"ep:user"})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(p,{prop:"captcha"},{default:o(()=>[e(i,{ref:"captcha",modelValue:l(m).captcha,"onUpdate:modelValue":t[8]||(t[8]=a=>l(m).captcha=a),placeholder:"验证码",tabindex:"2",autocomplete:"on"},{prefix:o(()=>[e(c,null,{default:o(()=>[e(r,{name:"ep:key"})]),_:1})]),append:o(()=>[e(x,null,{default:o(()=>[f("发送验证码")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(p,{prop:"newPassword"},{default:o(()=>[e(i,{modelValue:l(m).newPassword,"onUpdate:modelValue":t[9]||(t[9]=a=>l(m).newPassword=a),type:"password",placeholder:"新密码",tabindex:"3",autocomplete:"on","show-password":""},{prefix:o(()=>[e(c,null,{default:o(()=>[e(r,{name:"ep:lock"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),s("div",_e,[e(M,{type:"primary",underline:!1,onClick:t[10]||(t[10]=a=>w.value="login")},{default:o(()=>[f(" 返回登录 ")]),_:1})])]),_:1},8,["model","rules"]),[[R,l(w)==="reset"]])]),e(A)])}}});typeof q=="function"&&q(F);const he=te(F,[["__scopeId","data-v-ae91adce"]]);export{he as default};
//# sourceMappingURL=login-578e1535.js.map
