{"version":3,"file":"index-5c377ca2.js","sources":["../../src/layouts/components/SubSidebar/index.vue"],"sourcesContent":["<script lang=\"ts\">\nimport { defineComponent } from 'vue'\nexport default defineComponent({\n  name: 'SubSidebar',\n})\n</script>\n<script lang=\"ts\" setup name=\"SubSidebar\">\r\nimport Logo from '../Logo/index.vue'\r\nimport SidebarItem from '../SidebarItem/index.vue'\r\nimport useSettingsStore from '@/store/modules/settings'\r\nimport useMenuStore from '@/store/modules/menu'\r\n\r\nconst settingsStore = useSettingsStore()\r\nconst menuStore = useMenuStore()\r\n\r\nconst sidebarScrollTop = ref(0)\r\n\r\nfunction onSidebarScroll(e: Event) {\r\n  sidebarScrollTop.value = (e.target as HTMLElement).scrollTop\r\n}\r\n</script>\r\n\r\n<template>\r\n  <div v-if=\"['side', 'head', 'single'].includes(settingsStore.settings.menu.menuMode) || settingsStore.mode === 'mobile'\" class=\"sub-sidebar-container\" :class=\"{ 'is-collapse': settingsStore.mode === 'pc' && settingsStore.settings.menu.subMenuCollapse }\" @scroll=\"onSidebarScroll\">\r\n    <Logo\r\n      :show-logo=\"settingsStore.settings.menu.menuMode === 'single'\" class=\"sidebar-logo\" :class=\"{\r\n        'sidebar-logo-bg': settingsStore.settings.menu.menuMode === 'single',\r\n        'shadow': sidebarScrollTop,\r\n      }\"\r\n    />\r\n    <!-- 侧边栏模式（无主导航） -->\r\n    <el-menu\r\n      :unique-opened=\"settingsStore.settings.menu.subMenuUniqueOpened\" :default-openeds=\"menuStore.defaultOpenedPaths\" :default-active=\"$route.meta.activeMenu || $route.path\" :collapse=\"settingsStore.mode === 'pc' && settingsStore.settings.menu.subMenuCollapse\" :collapse-transition=\"false\" :class=\"{\r\n        'is-collapse-without-logo': settingsStore.settings.menu.menuMode !== 'single' && settingsStore.settings.menu.subMenuCollapse,\r\n      }\"\r\n    >\r\n      <transition-group name=\"sub-sidebar\">\r\n        <template v-for=\"(route, index) in menuStore.sidebarMenus\">\r\n          <SidebarItem v-if=\"route.meta?.sidebar !== false\" :key=\"route.path || index\" :item=\"route\" :base-path=\"route.path\" />\r\n        </template>\r\n      </transition-group>\r\n    </el-menu>\r\n  </div>\r\n</template>\r\n\r\n<style lang=\"scss\" scoped>\r\n.sub-sidebar-container {\r\n  overflow-x: hidden;\r\n  overflow-y: auto;\r\n  overscroll-behavior: contain;\r\n\r\n  // firefox隐藏滚动条\r\n  scrollbar-width: none;\r\n\r\n  // chrome隐藏滚动条\r\n  &::-webkit-scrollbar {\r\n    display: none;\r\n  }\r\n\r\n  width: var(--g-sub-sidebar-width);\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  bottom: 0;\r\n  background-color: var(--g-sub-sidebar-bg);\r\n  box-shadow: 10px 0 10px -10px var(--g-box-shadow-color);\r\n  transition: background-color 0.3s, var(--el-transition-box-shadow), left 0.3s, width 0.3s;\r\n\r\n  &.is-collapse {\r\n    width: 64px;\r\n\r\n    .sidebar-logo {\r\n      &:not(.sidebar-logo-bg) {\r\n        display: none;\r\n      }\r\n\r\n      :deep(span) {\r\n        display: none;\r\n      }\r\n    }\r\n  }\r\n\r\n  .sidebar-logo {\r\n    transition: box-shadow 0.2s, background-color 0.3s, color 0.3s;\r\n    background-color: var(--g-sub-sidebar-bg);\r\n\r\n    &:not(.sidebar-logo-bg) {\r\n      :deep(span) {\r\n        color: var(--g-sub-sidebar-menu-color);\r\n      }\r\n    }\r\n\r\n    &.sidebar-logo-bg {\r\n      background-color: var(--g-main-sidebar-bg);\r\n    }\r\n\r\n    &.shadow {\r\n      box-shadow: 0 10px 10px -10px var(--g-box-shadow-color);\r\n    }\r\n  }\r\n\r\n  .el-menu {\r\n    border-right: 0;\r\n    padding-top: var(--g-sidebar-logo-height);\r\n    transition: border-color 0.3s, background-color 0.3s, color 0.3s, padding-top 0.3s;\r\n    background-color: var(--g-sub-sidebar-bg);\r\n\r\n    &:not(.el-menu--collapse) {\r\n      width: inherit;\r\n    }\r\n\r\n    &.is-collapse-without-logo {\r\n      padding-top: 0;\r\n    }\r\n\r\n    &.el-menu--collapse {\r\n      :deep(.title-icon) {\r\n        margin-right: 0;\r\n      }\r\n\r\n      :deep(.el-menu-item),\r\n      :deep(.el-sub-menu__title) {\r\n        span,\r\n        .el-sub-menu__icon-arrow {\r\n          display: none;\r\n        }\r\n      }\r\n    }\r\n\r\n    &.menu-radius:not(.el-menu--collapse) {\r\n      .sidebar-item {\r\n        padding: 0 10px;\r\n\r\n        &:first-child {\r\n          padding-top: 10px;\r\n        }\r\n\r\n        &:last-child {\r\n          padding-bottom: 10px;\r\n        }\r\n      }\r\n\r\n      :deep(.el-menu--inline),\r\n      :deep(.el-menu-item),\r\n      :deep(.el-sub-menu__title) {\r\n        border-radius: 10px;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// 次侧边栏动画\r\n.sub-sidebar-enter-active {\r\n  transition: opacity 0.3s, transform 0.3s;\r\n}\r\n\r\n.sub-sidebar-enter-from,\r\n.sub-sidebar-leave-active {\r\n  opacity: 0;\r\n  transform: translateY(30px) skewY(10deg);\r\n}\r\n\r\n.sub-sidebar-leave-active {\r\n  position: absolute;\r\n}\r\n</style>\r\n"],"names":["__default__","defineComponent","settingsStore","useSettingsStore","menuStore","useMenuStore","sidebarScrollTop","ref","onSidebarScroll","e"],"mappings":"0NAEA,MAAAA,EAAAC,EAAA,CAA+B,KAAA,YAE/B,CAAA,qBAQA,MAAAC,EAAAC,IACAC,EAAAC,IAEAC,EAAAC,EAAA,CAAA,EAEA,SAAAC,EAAAC,EAAA,CACEH,EAAA,MAAAG,EAAA,OAAA,SAAmD"}