
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{R as p,S as y,N as s,n as S,a as c,o as E,c as w,f as e,g as t,b as f,i as d,q as x,Q as L,_ as N,O as U}from"./index-04c83304.js";const T={data(){return{showEditDialog:!1,showManageDialog:!1,batchBtnEnable:!1,dataList:[],itemList:[],dialogType:"",manageCollectionCode:0,editItemDetail:{},showEditItemDialog:!1,itemDialogType:"",selectedRows:[],editDetail:{},editFieldRules:{code:[{required:!0,message:"字典集编码必填",trigger:"blur"}],name:[{required:!0,message:"字典集名称必填",trigger:"blur"}],value:[{required:!0,message:"字典值value必填",trigger:"blur"}],showName:[{required:!0,message:"字典值showName必填",trigger:"blur"}]}}},computed:{},mounted(){this.clickSearch()},methods:{loadListData(){p.get("server/dict/queryDictCollections").then(o=>{this.dataList=o.data})},clickSearch(){this.loadListData()},getSelectedRows(o){this.selectedRows=o,this.selectedRows&&this.selectedRows.length!==0?this.batchBtnEnable=!0:this.batchBtnEnable=!1},deleteSelection(o){y.confirm("确定要删除所选字典集吗？将同时删除此字典集下所有字典值。此操作不可恢复！","Warning",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const l=[];for(let m=0;m<this.selectedRows.length;m++){const b=this.selectedRows[m];l.push(b.id)}p.get(`server/dict/deleteCollections?ids=${l}`).then(m=>{m.code===0?s({type:"success",message:"删除成功"}):s({type:"error",message:`删除失败：${m.message}`}),this.clickSearch()})}).catch(()=>{})},deleteSingle(o){y.confirm("确定要删除此字典集吗？将同时删除此字典集下所有字典值。此操作不可恢复！","Warning",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{p.get(`server/dict/deleteCollection?id=${o.id}`).then(l=>{l.code===0?s({type:"success",message:"删除成功"}):s({type:"error",message:`删除失败：${l.message}`}),this.clickSearch()})}).catch(()=>{})},editSingle(o){p.get(`server/dict/queryDictCollection?collectionCode=${o.code}`).then(l=>{this.editDetail={code:l.data.code,name:l.data.name,dictDesc:l.data.dictDesc,id:l.data.id,type:l.data.type},this.dialogType="EDIT",this.showEditDialog=!0}).catch(l=>{s({type:"error",message:`编辑失败：${l}`})})},saveEditOperation(){this.$refs.editDetailForm.validate(o=>{if(!o)s({type:"error",message:"参数内容填写有误，请检查"});else{let l="server/dict/modifyDictCollection";this.dialogType==="CREATE"&&(l="server/dict/createDictCollection"),p.post(l,this.editDetail).then(m=>{m.code===0?(s({type:"success",message:"保存成功"}),this.showEditDialog=!1,this.clickSearch()):s({type:"error",message:`编辑失败：${m.message}`})})}})},cancelEditOperation(){this.showEditDialog=!1},create(){this.editDetail={name:"",code:"",dictDesc:"",type:0},this.dialogType="CREATE",this.showEditDialog=!0},cancelCreateOperation(){this.showEditDialog=!1},loadItemList(){p.get(`server/dict/queryDictItems?collectionCode=${this.manageCollectionCode}`).then(o=>{this.itemList=o.data})},itemManage(o){this.manageCollectionCode=o.code,this.loadItemList(),this.showManageDialog=!0},deleteSingleItem(o){y.confirm("确定要删除此字典值吗？此操作不可恢复！","Warning",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{p.get(`server/dict/deleteDictItem?dictItemId=${o.id}`).then(l=>{l.code===0?s({type:"success",message:"删除成功"}):s({type:"error",message:`删除失败：${l.message}`}),this.loadItemList()})}).catch(()=>{})},saveEditItemOperation(){this.$refs.editItemDetailForm.validate(o=>{o?p.post("server/dict/createOrModifyDictItem",this.editItemDetail).then(l=>{l.code===0?(s({type:"success",message:"保存成功"}),this.showEditItemDialog=!1,this.loadItemList()):s({type:"error",message:`编辑失败：${l.message}`})}):s({type:"error",message:"参数内容填写有误，请检查"})})},createItem(){this.editItemDetail={value:"",showName:"",itemDesc:"",sort:0,collectionCode:this.manageCollectionCode},this.itemDialogType="CREATE",this.showEditItemDialog=!0},editSingleItem(o){p.get(`server/dict/queryDictItem?itemId=${o.id}`).then(l=>{this.editItemDetail=l.data,this.itemDialogType="EDIT",this.showEditItemDialog=!0}).catch(l=>{s({type:"error",message:`编辑失败：${l}`})})},cancelEditItemOperation(){this.showEditItemDialog=!1}}};const M={class:"button-group"},O={key:0},q={key:1},z={key:2},W={class:"dialog-footer"},Q={class:"button-group"},j={class:"dialog-footer"};function G(o,l,m,b,u,a){const A=L,C=N,D=c("el-icon"),n=c("el-button"),r=c("el-table-column"),I=c("el-table"),k=U,_=c("el-input"),g=c("el-form-item"),h=c("el-col"),v=c("el-radio"),R=c("el-radio-group"),V=c("el-form"),B=c("el-dialog");return E(),w("div",null,[e(A,{title:"字典值管理",content:"本页面提供对字典集以及字典值列表的维护能力，字典可以用于下拉框类型的字段使用，用来定义下拉框的候选值。"}),e(k,null,{default:t(()=>[f("div",M,[e(n,{type:"primary",onClick:a.create},{icon:t(()=>[e(D,null,{default:t(()=>[e(C,{name:"ep:circle-plus"})]),_:1})]),default:t(()=>[d(" 新建 ")]),_:1},8,["onClick"]),e(n,{type:"danger",disabled:!u.batchBtnEnable,onClick:a.deleteSelection},{icon:t(()=>[e(D,null,{default:t(()=>[e(C,{name:"ep:delete"})]),_:1})]),default:t(()=>[d(" 删除所选 ")]),_:1},8,["disabled","onClick"])]),e(I,{border:"","highlight-current-row":"",data:u.dataList,height:"100%",onSelectionChange:a.getSelectedRows},{default:t(()=>[e(r,{type:"selection",width:"55"}),e(r,{fixed:"",prop:"id",label:"ID",width:"200"}),e(r,{fixed:"",prop:"code",label:"字典集编码",width:"200"}),e(r,{prop:"name",label:"字典集名称",width:"360"}),e(r,{prop:"type",label:"字典集类型",width:"200"},{default:t(i=>[i.row.type===0?(E(),w("p",O,"手动配置枚举项")):i.row.type===1?(E(),w("p",q,"系统预置动态列表")):(E(),w("p",z,[e(D,null,{default:t(()=>[e(C,{name:"table-not-support"})]),_:1})]))]),_:1}),e(r,{prop:"dictDesc",label:"描述说明"}),e(r,{fixed:"right",label:"操作",width:"200"},{default:t(i=>[e(n,{link:"",type:"primary",size:"small",onClick:F=>a.editSingle(i.row)},{default:t(()=>[d(" 编辑 ")]),_:2},1032,["onClick"]),e(n,{link:"",type:"primary",size:"small",disabled:i.row.type===1,onClick:F=>a.itemManage(i.row)},{default:t(()=>[d(" 字典值管理 ")]),_:2},1032,["disabled","onClick"]),e(n,{link:"",type:"danger",size:"small",onClick:F=>a.deleteSingle(i.row)},{default:t(()=>[d(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","onSelectionChange"])]),_:1}),e(B,{modelValue:u.showEditDialog,"onUpdate:modelValue":l[4]||(l[4]=i=>u.showEditDialog=i),title:u.dialogType==="CREATE"?"创建字典集":"编辑字典集"},{footer:t(()=>[f("span",W,[e(n,{onClick:a.cancelEditOperation},{default:t(()=>[d(" 取消 ")]),_:1},8,["onClick"]),e(n,{type:"primary",onClick:a.saveEditOperation},{default:t(()=>[d(" 保存 ")]),_:1},8,["onClick"])])]),default:t(()=>[e(V,{ref:"editDetailForm",model:u.editDetail,size:"default","label-width":"120px",rules:u.editFieldRules},{default:t(()=>[e(h,{span:18},{default:t(()=>[e(g,{label:"字典集编码",prop:"code",rules:u.editFieldRules.code},{default:t(()=>[e(_,{modelValue:u.editDetail.code,"onUpdate:modelValue":l[0]||(l[0]=i=>u.editDetail.code=i),disabled:u.dialogType==="EDIT",placeholder:"输入字典集编码,允许英文和数字",maxlength:"64","show-word-limit":""},null,8,["modelValue","disabled"])]),_:1},8,["rules"])]),_:1}),e(h,{span:18},{default:t(()=>[e(g,{label:"字典集名称",prop:"name",rules:u.editFieldRules.name},{default:t(()=>[e(_,{modelValue:u.editDetail.name,"onUpdate:modelValue":l[1]||(l[1]=i=>u.editDetail.name=i),placeholder:"输入字典集名称",maxlength:"64","show-word-limit":""},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1}),e(h,{span:18},{default:t(()=>[e(g,{label:"字典集类型",prop:"type"},{default:t(()=>[e(R,{modelValue:u.editDetail.type,"onUpdate:modelValue":l[2]||(l[2]=i=>u.editDetail.type=i)},{default:t(()=>[e(v,{label:0,size:"large"},{default:t(()=>[d(" 手动配置枚举项 ")]),_:1}),e(v,{label:1,size:"large"},{default:t(()=>[d(" 系统预置动态列表 ")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(h,{span:18},{default:t(()=>[e(g,{label:"字典集描述"},{default:t(()=>[e(_,{modelValue:u.editDetail.dictDesc,"onUpdate:modelValue":l[3]||(l[3]=i=>u.editDetail.dictDesc=i),type:"textarea",rows:3,placeholder:"输入简要描述信息",clearable:"",maxlength:"256","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"]),e(B,{modelValue:u.showManageDialog,"onUpdate:modelValue":l[5]||(l[5]=i=>u.showManageDialog=i),title:"字典值管理",width:"1200px"},{default:t(()=>[f("div",null,[e(k,null,{default:t(()=>[f("div",Q,[e(n,{type:"primary",onClick:a.createItem},{icon:t(()=>[e(D,null,{default:t(()=>[e(C,{name:"ep:circle-plus"})]),_:1})]),default:t(()=>[d(" 新建 ")]),_:1},8,["onClick"])]),e(I,{border:"","highlight-current-row":"",data:u.itemList,onSelectionChange:a.getSelectedRows},{default:t(()=>[e(r,{fixed:"",prop:"value",label:"值",width:"150"}),e(r,{fixed:"",prop:"showName",label:"显示名称",width:"200"}),e(r,{prop:"sort",label:"排序",width:"80"}),e(r,{prop:"itemDesc",label:"含义描述说明"}),e(r,{fixed:"right",label:"操作",width:"120"},{default:t(i=>[e(n,{link:"",type:"primary",size:"small",onClick:F=>a.editSingleItem(i.row)},{default:t(()=>[d(" 编辑 ")]),_:2},1032,["onClick"]),e(n,{link:"",type:"danger",size:"small",onClick:F=>a.deleteSingleItem(i.row)},{default:t(()=>[d(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","onSelectionChange"])]),_:1})])]),_:1},8,["modelValue"]),e(B,{modelValue:u.showEditItemDialog,"onUpdate:modelValue":l[10]||(l[10]=i=>u.showEditItemDialog=i),title:u.itemDialogType==="CREATE"?"新增字典值":"编辑字典值"},{footer:t(()=>[f("span",j,[e(n,{onClick:a.cancelEditItemOperation},{default:t(()=>[d(" 取消 ")]),_:1},8,["onClick"]),e(n,{type:"primary",onClick:a.saveEditItemOperation},{default:t(()=>[d(" 保存 ")]),_:1},8,["onClick"])])]),default:t(()=>[e(V,{ref:"editItemDetailForm",model:u.editItemDetail,size:"default","label-width":"120px",rules:u.editFieldRules},{default:t(()=>[e(h,{span:18},{default:t(()=>[e(g,{label:"值",prop:"value",rules:u.editFieldRules.value},{default:t(()=>[e(_,{modelValue:u.editItemDetail.value,"onUpdate:modelValue":l[6]||(l[6]=i=>u.editItemDetail.value=i),disabled:u.itemDialogType!=="CREATE"},null,8,["modelValue","disabled"])]),_:1},8,["rules"])]),_:1}),e(h,{span:18},{default:t(()=>[e(g,{label:"显示名称",prop:"showName",rules:u.editFieldRules.showName},{default:t(()=>[e(_,{modelValue:u.editItemDetail.showName,"onUpdate:modelValue":l[7]||(l[7]=i=>u.editItemDetail.showName=i),placeholder:"输入字典值显示名称",maxlength:"64","show-word-limit":""},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1}),e(h,{span:18},{default:t(()=>[e(g,{label:"排序",prop:"sort",rules:u.editFieldRules.sort},{default:t(()=>[e(_,{modelValue:u.editItemDetail.sort,"onUpdate:modelValue":l[8]||(l[8]=i=>u.editItemDetail.sort=i),placeholder:"输入排序值",type:"number"},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1}),e(h,{span:18},{default:t(()=>[e(g,{label:"字典值含义描述"},{default:t(()=>[e(_,{modelValue:u.editItemDetail.itemDesc,"onUpdate:modelValue":l[9]||(l[9]=i=>u.editItemDetail.itemDesc=i),type:"textarea",rows:3,placeholder:"输入简要描述信息",clearable:"",maxlength:"256","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}typeof x=="function"&&x(T);const J=S(T,[["render",G],["__scopeId","data-v-ca403845"]]);export{J as default};
//# sourceMappingURL=enum-mgt-e2d2ba78.js.map
